/* =========================================================
   0) 변수
========================================================= */
:root {
  --gap-sm: 8px;
  --radius: 8px;
  --border: 1px solid #ccc;

  --blue: #1e2a78;
  --blue-dark: #20276e;

  --card-bg: #f9f9f9;

  --red: #87010C;
  --red-dark: #7c010b;
}

/* =========================================================
   1) 공통(카드/차트)
========================================================= */
.card {
  background-color: var(--card-bg);
  border: var(--border);
  border-radius: var(--radius);
  padding: 0.65rem;
  text-align: left;

  display: flex;
  flex-direction: column;

  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
}

.cardHeader {
  flex: 0 0 auto;
  line-height: 1;
  margin-bottom: 6px;
}

.cardTitle {
  flex: 0 0 auto;
  margin-bottom: 6px;
}

.chartBox {
  width: 100%;
  position: relative;

  height: 210px;
  min-height: 210px;
  overflow: hidden;

  min-width: 0;
}

.chartBoxSm {
  height: 180px;
  min-height: 180px;
  max-height: 180px;
}

/* ✅ 도넛이 카드 안에 딱 맞게 */
.donutHost {
  padding-bottom: 16px;   /* 8~16px 사이로 조절 */
  flex: 1 1 auto;
  min-height: 0;
  width: 100%;
  height: 100%;
  position: relative;

  display: flex;
  align-items: center;
  justify-content: center;

  overflow: hidden;
  padding: 8px;
  box-sizing: border-box;
}

/* 도넛 아래 텍스트(카드 폭 230px 이하일 때만 TSX에서 렌더됨) */
.donutBottomValue {
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  font-weight: 800;
  font-size: 28px;
  line-height: 1;
  pointer-events: none;
  font-family: 'SpoqaHanSansNeo-Bold';
}

/* apex 내부가 host를 꽉 채우게(중요) */
.donutHost :global(.apexcharts-canvas),
.donutHost :global(svg) {
  width: 100% !important;
  height: 100% !important;
}
/* 출석률 카드(PC 기본은 기존 inline height 266px 그대로) */
.attendanceCard {
  height: auto;
}
/* =========================================================
   2) Dashboard Layout (현재 TSX 구조)
========================================================= */
.mainDashboard {
  width: 100%;
  flex: 1 1 auto;
  min-height: 0;

  padding-top: 0.5%;
  box-sizing: border-box;

  display: flex;
  flex-direction: column;
  gap: var(--gap-sm);

  overflow: auto;
  scrollbar-width: none;
}

/* --- 상단 영역 --- */
.topSummary {
  display: grid;
  grid-template-columns: 45fr 55fr;
  gap: 8px;
  align-items: start;
}

.topAttend {
  display: grid;
  grid-template-columns: 2fr 3fr;
  gap: 8px;
}

.attendBox {
  width: 100%;
  height: auto;
}

/* TOP5 카드들 */
.averageTop {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.topRecordWrap {
  /* background-color: var(--blue) !important; */
  background-color: var(--red) !important;
  color: #fff;

  display: grid;
  grid-template-rows: 40px repeat(5, 44px);

  width: 100%;
  height: auto;
  border-radius: var(--radius);
  padding-bottom: 5px;
  overflow: hidden;
}

.topRecordTitle {
  padding: 0.65rem;
  font-size: 0.75rem;
  font-weight: 500;
}

.playerRow {
  display: flex;
  align-items: center;
  justify-content: space-between;

  font-family: 'Anton', sans-serif;
  font-size: 0.95rem;
  font-weight: 600;

  padding: 0 12px;
}

.firstPlayerRow {
  /* background: linear-gradient(to right, #d4af37, #f2d16b); */
  background: linear-gradient(to right, #f4d05a, #cfb25c);
  /* background: linear-gradient(to right, #87010C, #b00110); */
  color: #000;
}

.normalPlayerRow {
  /* background-color: var(--blue-dark); */
  background-color: var(--red-dark);
  color: #fff;
  position: relative;
}

.normalPlayerRow:not(:first-of-type)::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 1px;
  /* background: linear-gradient(to right, #0651ca, #004179); */
  background: linear-gradient(to right, #9e0310, #c40515);
}

.rank {
  width: 1.5rem;
  text-align: left;
  font-family: 'Anton', sans-serif;
  font-weight: 500;
}

.name {
  flex: 1;
  text-align: left;
  padding-left: 0.5rem;
  font-weight: 600;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0; /* flex item 말줄임 필수 */
}

.score {
  width: 3.5rem;
  text-align: right;
  font-family: 'Anton', sans-serif;
  font-weight: 500;
  white-space: nowrap;
}

/* --- 중단 영역 --- */
.middleSummary {
  display: grid;
  grid-template-columns: minmax(0, 0.82fr) minmax(0, 1fr);
  gap: 8px;
  align-items: stretch;

  min-height: 0;
  flex: 1 1 auto;
}

/* 왼쪽(개인기록 + 2개 차트) */
.leftCharts {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.cardShort {
  font-size: 0.9rem;
  padding: 0.8rem;
  height: auto;
}

.privateRecord {
  /* background-color: var(--blue); */
  background-color: var(--red);
  color: #fff;
  min-height: 220px;
}

/* 아래 2개 차트 */
.leftCharts .cardGroupRow {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

/* 개인기록 내부 */
.privateRecordHeader {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: -10px;
}

.privateRecordHeaderRight {
  font-family: 'Anton', sans-serif;
  padding-right: 6px;
}

.privateRecordContents {
  width: 100%;
  height: 100%;

  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1%;

  margin-top: 5px;
}

.privateRecordContentsDetail {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  align-items: center;
  justify-content: center;
}

.privateRecordContentsTitle {
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Anton', sans-serif;
}

.privateRecordContentsSubTitle {
  font-size: 0.7rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Anton', sans-serif;
  margin-top: -5px;
}

.privateMainRecord {
  font-size: 5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Anton', sans-serif;
  line-height: 1;
}

.privateAddRecord {
  width: 100%;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  margin: 23px 0 29px;
}

.privateSubRecord {
  font-size: 1.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Anton', sans-serif;
}

/* 오른쪽 그리드 */
.rightGrid {
  display: flex;
  flex-direction: column;
  min-height: 0;
  flex: 1 1 auto;
}

/* 차트/카드가 들어있는 flex 자식들이 줄어들 수 있게 */
.topAttend,
.attendBox,
.card,
.chartBox,
.lineChartAttendBox {
  min-width: 0;
}

/* 혹시 오른쪽 TOP5 박스들도 flex 자식이면 같이 */
.averageTop,
.topRecordWrap {
  min-width: 0;
}

/* ApexCharts 내부가 px 고정폭을 들고 있어도 부모 폭을 따라가게 */
.lineChartAttendBox :global(.apexcharts-canvas),
.lineChartAttendBox :global(.apexcharts-svg) {
  width: 100% !important;
}

/* =========================================================
   3) Responsive - Notebook(PC 좁은 폭)
========================================================= */
@media (max-width: 1366px) {
  .averageTop {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--gap-sm);
  }
}

/* =========================================================
   3-1) Responsive - 1450px 이하: 상단 2줄 구성
   (1줄: 출석률+참여현황 / 2줄: Top5 4개 한 줄)
========================================================= */
@media (max-width: 1450px) {
  /* 상단 전체를 1열로 바꾸고 2행으로 쌓기 */
  .topSummary {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto;
    grid-template-areas:
      "attend"
      "top5";
  }

  .topAttend {
    grid-area: attend;
    /* 기존 2fr 3fr 유지 */
    grid-template-columns: 2fr 3fr;
  }

  .averageTop {
    grid-area: top5;

    /* Top5 4개를 무조건 한 줄로 */
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

/* =========================================================
   4) Responsive - Mobile (구조 변경)
========================================================= */
@media (max-width: 768px) {
  .mainDashboard {
    overflow: auto !important;
    padding-bottom: 12px;
  }

  .topSummary,
  .leftCharts,
  .cardGroupRow,
  .topAttend,
  .averageTop {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    height: auto !important;
    flex-wrap: nowrap;
  }
 

  .topAttend,
  .attendBox,
  .card {
    min-width: 0;
  }

  .card,
  .topRecordWrap {
    width: 100% !important;
    max-width: 100%;
    box-sizing: border-box;
    overflow: hidden;
  }
  
  .attendanceCard {
    height: 500px !important; /* inline height(266px) 덮어쓰기 */
  }

  .middleSummary {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 1 auto !important;
    min-height: 0 !important;
    height: auto !important;
  }

  .rightGrid {
    flex: 1 1 auto !important;
    min-height: 60vh !important;
  }

  .rightGrid > :first-child {
    height: auto !important;
    min-height: 52vh !important;
  }

  .lineChartAttendBox {
    /* height: 210px; */
    /* min-height: 210px; */
    /* max-height: 210px; */
    height: auto;
    min-height: 0;
    flex: 1 1 auto;
    width: 100%;
    overflow: visible;
    min-width: 0;
  }

  .playerRow {
    justify-content: center;
  }

  .privateRecord {
    width: 100% !important;
    box-sizing: border-box;
    padding: 10px;
    display: flex;
    flex-direction: column;

    height: auto !important;
    overflow: visible !important;
    min-height: 0 !important;
    flex: none !important;
  }

  .privateRecordHeader {
    flex-direction: row;
    align-items: center;
    gap: 10px;
  }

  .privateRecordHeaderRight {
    font-size: 14px;
    text-align: center;
  }

  .privateRecordContents {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-top: 30px;

    max-height: none !important;
    overflow: visible !important;
  }

  .privateRecordContentsDetail {
    width: 100%;
    height: auto;
    text-align: center;
  }

  .privateMainRecord {
    font-size: 28px;
    font-weight: bold;
    text-align: center;
  }

  .privateRecordContentsTitle,
  .privateRecordContentsSubTitle {
    font-size: 12px;
    text-align: center;
    word-break: keep-all;
  }

  .privateAddRecord {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    width: 100%;
    gap: 10px;
    margin-top: 0;

    max-height: none !important;
    overflow: visible !important;
  }

  .privateSubRecord {
    font-size: 28px;
    font-weight: bold;
    text-align: center;
  }

  .cardShort {
    height: auto !important;
  }
}

@media (max-width: 510px){
  .attendanceCard{
    height: 400px !important;  /* 266 -> 276 정도만 */
  }
}